# MCPHub æ–°é¡¹ç›®ç»“æ„è¯´æ˜

## ğŸ‰ ä¼˜åŒ–å®Œæˆ

é¡¹ç›®ç»“æ„å·²æˆåŠŸé‡ç»„ï¼æ‰€æœ‰æ–‡ä»¶å·²æŒ‰åŠŸèƒ½åˆ†ç±»åˆ°åˆç†çš„ç›®å½•ä¸­ã€‚

## ğŸ“ æ–°çš„ç›®å½•ç»“æ„

```
mcphub-origin/
â”‚
â”œâ”€â”€ ğŸ“¦ package.json              # é¡¹ç›®ä¾èµ–å’Œè„šæœ¬
â”œâ”€â”€ ğŸ“– README.md                 # é¡¹ç›®è¯´æ˜  
â”œâ”€â”€ ğŸ”§ tsconfig.json             # TypeScripté…ç½®
â”œâ”€â”€ ğŸš€ start-mcphub.sh           # ğŸ†• ç»Ÿä¸€å¯åŠ¨è„šæœ¬
â”‚
â”œâ”€â”€ ğŸ“ src/                      # åç«¯æºä»£ç  (ä¸å˜)
â”œâ”€â”€ ğŸ“ frontend/                 # å‰ç«¯ä»£ç  (ä¸å˜)
â”œâ”€â”€ ğŸ“ docs/                     # é¡¹ç›®æ–‡æ¡£ (ä¸å˜)
â”œâ”€â”€ ğŸ“ tests/                    # æµ‹è¯•æ–‡ä»¶ (ä¸å˜)
â”‚
â”œâ”€â”€ ğŸ³ docker/                   # ğŸ†• Dockerç›¸å…³æ–‡ä»¶
â”‚   â”œâ”€â”€ Dockerfile               # å®¹å™¨æ„å»ºæ–‡ä»¶
â”‚   â”œâ”€â”€ docker-compose.yml       # æœåŠ¡ç¼–æ’é…ç½®
â”‚   â”œâ”€â”€ .dockerignore            # Dockerå¿½ç•¥æ–‡ä»¶
â”‚   â”œâ”€â”€ entrypoint.sh            # å®¹å™¨å…¥å£è„šæœ¬
â”‚   â”œâ”€â”€ ğŸ“ scripts/              # Dockerè„šæœ¬
â”‚   â”‚   â”œâ”€â”€ start.sh             # å¯åŠ¨è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ stop.sh              # åœæ­¢è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ restart.sh           # ğŸ†• é‡å¯è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ backup.sh            # å¤‡ä»½è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ restore.sh           # æ¢å¤è„šæœ¬
â”‚   â”‚   â””â”€â”€ health-check.sh      # å¥åº·æ£€æŸ¥è„šæœ¬
â”‚   â”œâ”€â”€ ğŸ“ config/               # Dockeré…ç½®
â”‚   â”‚   â””â”€â”€ .env.example         # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”‚   â””â”€â”€ ğŸ“ volumes/              # æ•°æ®å·é…ç½®ç›®å½•
â”‚       â”œâ”€â”€ postgres/
â”‚       â”œâ”€â”€ redis/
â”‚       â””â”€â”€ logs/
â”‚
â”œâ”€â”€ ğŸ“œ scripts/                  # ğŸ”„ é‡æ–°ç»„ç»‡çš„è„šæœ¬ç›®å½•
â”‚   â”œâ”€â”€ ğŸ“ setup/                # å®‰è£…å’Œè®¾ç½®è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ install.sh           # å®‰è£…è„šæœ¬
â”‚   â”‚   â””â”€â”€ fix-node-version.sh  # Nodeç‰ˆæœ¬ä¿®å¤
â”‚   â”œâ”€â”€ ğŸ“ dev/                  # å¼€å‘å·¥å…·è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ start.sh             # å¼€å‘å¯åŠ¨
â”‚   â”‚   â””â”€â”€ stop.sh              # å¼€å‘åœæ­¢
â”‚   â”œâ”€â”€ ğŸ“ database/             # æ•°æ®åº“è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ init-postgres.sql    # PostgreSQLåˆå§‹åŒ–
â”‚   â”‚   â””â”€â”€ check-pgvector.sh    # pgvectoræ£€æŸ¥
â”‚   â”œâ”€â”€ ğŸ“ validation/           # éªŒè¯è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ validate-config.sh   # é…ç½®éªŒè¯
â”‚   â”‚   â””â”€â”€ test-environment.sh  # ç¯å¢ƒæµ‹è¯•
â”‚   â””â”€â”€ ğŸ“ deployment/           # éƒ¨ç½²è„šæœ¬ç›®å½• (ä¸ºæœªæ¥æ‰©å±•)
â”‚
â”œâ”€â”€ âš™ï¸ config/                   # ğŸ†• é…ç½®æ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ ğŸ“ app/                  # åº”ç”¨é…ç½®
â”‚   â”‚   â”œâ”€â”€ mcp_settings.json    # MCPæœåŠ¡å™¨è®¾ç½®
â”‚   â”‚   â””â”€â”€ servers.json         # æœåŠ¡å™¨åˆ—è¡¨
â”‚   â”œâ”€â”€ ğŸ“ environment/          # ç¯å¢ƒé…ç½®
â”‚   â”‚   â””â”€â”€ development.env.example # å¼€å‘ç¯å¢ƒå˜é‡
â”‚   â”œâ”€â”€ ğŸ“ database/             # æ•°æ®åº“é…ç½®ç›®å½•
â”‚   â””â”€â”€ ğŸ“ security/             # å®‰å…¨é…ç½®ç›®å½•
â”‚       â””â”€â”€ ssl/                 # SSLè¯ä¹¦ç›®å½•
â”‚
â””â”€â”€ ğŸ“Š logs/                     # ğŸ†• æ—¥å¿—ç›®å½•
    â”œâ”€â”€ access/                  # è®¿é—®æ—¥å¿—
    â”œâ”€â”€ mcp_usage/              # MCPä½¿ç”¨æ—¥å¿—
    â”œâ”€â”€ application/            # åº”ç”¨æ—¥å¿—
    â””â”€â”€ error/                  # é”™è¯¯æ—¥å¿—
```

## ğŸš€ å¿«é€Ÿä½¿ç”¨æŒ‡å—

### ç»Ÿä¸€å¯åŠ¨è„šæœ¬
æ–°å¢äº† `start-mcphub.sh` ç»Ÿä¸€å¯åŠ¨è„šæœ¬ï¼š

```bash
# æŸ¥çœ‹å¸®åŠ©
./start-mcphub.sh --help

# å¯åŠ¨å¼€å‘ç¯å¢ƒ
./start-mcphub.sh dev

# å¯åŠ¨ç”Ÿäº§ç¯å¢ƒ (Docker)
./start-mcphub.sh prod

# é¦–æ¬¡å®‰è£…è®¾ç½®
./start-mcphub.sh setup

# éªŒè¯é…ç½®
./start-mcphub.sh check

# æ¸…ç†ç¯å¢ƒ
./start-mcphub.sh clean
```

### Docker æ“ä½œ
```bash
# è¿›å…¥dockerç›®å½•
cd docker

# å¯åŠ¨æœåŠ¡
docker-compose up -d

# åœæ­¢æœåŠ¡
docker-compose down

# é‡å¯æœåŠ¡
./scripts/restart.sh

# å¤‡ä»½æ•°æ®
./scripts/backup.sh

# æ¢å¤æ•°æ®
./scripts/restore.sh [backup_directory]

# å¥åº·æ£€æŸ¥
./scripts/health-check.sh
```

### è„šæœ¬åˆ†ç±»ä½¿ç”¨
```bash
# å®‰è£…å’Œè®¾ç½®
./scripts/setup/install.sh
./scripts/setup/fix-node-version.sh

# å¼€å‘å·¥å…·
./scripts/dev/start.sh
./scripts/dev/stop.sh

# æ•°æ®åº“ç®¡ç†
./scripts/database/check-pgvector.sh

# é…ç½®éªŒè¯
./scripts/validation/validate-config.sh
./scripts/validation/test-environment.sh
```

## ğŸ“ˆ ä¼˜åŒ–æ•ˆæœ

### ç›®å½•ç»„ç»‡å¯¹æ¯”
| æ–¹é¢ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å |
|------|--------|--------|
| æ ¹ç›®å½•æ–‡ä»¶æ•° | 30+ | 10- |
| Dockeræ–‡ä»¶ | åˆ†æ•£8ä¸ªæ–‡ä»¶ | é›†ä¸­åœ¨docker/ç›®å½• |
| è„šæœ¬ç»„ç»‡ | æ··ä¹±14ä¸ªè„šæœ¬ | æŒ‰åŠŸèƒ½åˆ†ç±»5ä¸ªå­ç›®å½• |
| é…ç½®ç®¡ç† | åˆ†æ•£å„å¤„ | ç»Ÿä¸€åœ¨config/ç›®å½• |
| æ—¥å¿—ç®¡ç† | 2ä¸ªæ•£è½ç›®å½• | ç»“æ„åŒ–logs/ç›®å½• |

### âœ… ä¸»è¦æ”¹è¿›
1. **ğŸ” æŸ¥æ‰¾ä¾¿æ·** - ç›¸å…³æ–‡ä»¶é›†ä¸­ï¼Œå¿«é€Ÿå®šä½
2. **ğŸ› ï¸ ç»´æŠ¤ç®€å•** - æŒ‰åŠŸèƒ½åˆ†ç±»ï¼ŒèŒè´£æ¸…æ™°
3. **ğŸ”„ æ‰©å±•å‹å¥½** - é¢„ç•™æ‰©å±•ç›®å½•ï¼Œæ”¯æŒæ–°åŠŸèƒ½
4. **ğŸ‘¥ å›¢é˜Ÿåä½œ** - ç›®å½•èŒè´£æ˜ç¡®ï¼Œå‡å°‘å†²çª
5. **ğŸ“¦ éƒ¨ç½²ç®€åŒ–** - Dockeræ–‡ä»¶é›†ä¸­ï¼Œéƒ¨ç½²æµç¨‹æ¸…æ™°

## ğŸ”§ è·¯å¾„æ›´æ–°

### ä¸»è¦å˜æ›´
- `docker-compose.yml` â†’ `docker/docker-compose.yml`
- `mcp_settings.json` â†’ `config/app/mcp_settings.json`
- `servers.json` â†’ `config/app/servers.json`
- `docker-*.sh` â†’ `docker/scripts/*.sh`
- `access_logs/` â†’ `logs/access/`
- `mcp_usage_logs/` â†’ `logs/mcp_usage/`

### è·¯å¾„å¼•ç”¨å·²æ›´æ–°
âœ… `docker/docker-compose.yml` - å®¹å™¨æ„å»ºè·¯å¾„å’ŒæŒ‚è½½è·¯å¾„  
âœ… `scripts/validation/validate-config.sh` - éªŒè¯è„šæœ¬è·¯å¾„  
âœ… æ‰€æœ‰è„šæœ¬çš„å¯æ‰§è¡Œæƒé™  

## âš ï¸ é‡è¦æé†’

### åº”ç”¨ä»£ç æ›´æ–°
å¦‚éœ€åœ¨åº”ç”¨ä»£ç ä¸­å¼•ç”¨é…ç½®æ–‡ä»¶ï¼Œè¯·æ›´æ–°è·¯å¾„ï¼š
```typescript
// æ—§è·¯å¾„
const configPath = './mcp_settings.json';

// æ–°è·¯å¾„
const configPath = './config/app/mcp_settings.json';
```

### Git å¿½ç•¥æ–‡ä»¶
å»ºè®®æ›´æ–° `.gitignore`ï¼š
```gitignore
# æ—¥å¿—æ–‡ä»¶
logs/**/*.log
logs/*/

# ç¯å¢ƒé…ç½®
config/environment/.env.*
!config/environment/*.example

# Dockeræ•°æ®
docker/volumes/
```

## ğŸ¯ æœªæ¥æ‰©å±•

### é¢„ç•™ç›®å½•
- `scripts/deployment/` - éƒ¨ç½²è‡ªåŠ¨åŒ–è„šæœ¬
- `config/database/` - æ•°æ®åº“ä¸“ç”¨é…ç½®
- `config/security/` - å®‰å…¨è¯ä¹¦å’Œå¯†é’¥
- `logs/application/` - åº”ç”¨æ—¥å¿—
- `logs/error/` - é”™è¯¯æ—¥å¿—

### å»ºè®®å¢å¼º
1. **ç›‘æ§è„šæœ¬** - æ·»åŠ æ€§èƒ½ç›‘æ§å’Œå‘Šè­¦
2. **è‡ªåŠ¨åŒ–æµ‹è¯•** - åœ¨validationç›®å½•å¢åŠ æµ‹è¯•è„šæœ¬
3. **å¤šç¯å¢ƒæ”¯æŒ** - åœ¨configç›®å½•å¢åŠ ç¯å¢ƒç‰¹å®šé…ç½®
4. **æ—¥å¿—è½®è½¬** - å®ç°æ—¥å¿—æ–‡ä»¶è‡ªåŠ¨æ¸…ç†

## ğŸ‰ æ€»ç»“

æ–°çš„é¡¹ç›®ç»“æ„å…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š
- âœ… **ç»„ç»‡æ¸…æ™°** - æŒ‰åŠŸèƒ½åˆ†ç±»ï¼Œæ˜“äºç†è§£
- âœ… **ç»´æŠ¤ä¾¿æ·** - ç›¸å…³æ–‡ä»¶é›†ä¸­ï¼Œä¾¿äºç®¡ç†
- âœ… **æ‰©å±•å‹å¥½** - é¢„ç•™ç›®å½•ï¼Œæ”¯æŒåŠŸèƒ½å¢é•¿
- âœ… **å›¢é˜Ÿåä½œ** - èŒè´£åˆ†æ˜ï¼Œå‡å°‘å†²çª
- âœ… **éƒ¨ç½²ç®€åŒ–** - Dockeré…ç½®é›†ä¸­ï¼Œæµç¨‹æ¸…æ™°

é¡¹ç›®ç°åœ¨æ›´åŠ ä¸“ä¸šå’Œæ˜“äºç»´æŠ¤ï¼ğŸš€